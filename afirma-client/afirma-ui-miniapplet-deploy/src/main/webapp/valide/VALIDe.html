<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
	<title>Pagina de Pruebas</title>
	

<link rel="stylesheet" type="text/css" href="VALIDe_files/valide.css">
<link rel="stylesheet" type="text/css" href="VALIDe_files/estilos.css" media="screen">





<meta http-equiv="Expires" content="0">
<meta http-equiv="Last-Modified" content="0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="content-script-type" content="text/javascript"> 
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta http-equiv="Cache-Control" content="no-cache,no-store">
<meta name="lang" content="es">
<script type="text/javascript" src="VALIDe_files/miniapplet.js"></script>

</head>
<body>
	
	<!-- CONTENEDOR ** -->
	<div id="contenedor">
		<div id="cabecera">
			

<div class="cabecera">
	<a href="http://argentina.gob.ar/" title="Administracion" class="floatLeft" target="_blank">
		<img style="padding-top: 15pt"src="VALIDe_files/logo_admon_a_corto.png" alt="administracion" title="PAGAdmonGobAr" class="logo060x">
	</a>
	<!-- <a href="https://valide.redsara.es/valide/inicio.html" title="VALIDe" class="floatLeft">
		<img src="VALIDe_files/logoValideHome.PNG" alt="valide.redsara.es" title="VALIDe">
	</a> -->
	<a href="http://www.argentina.gob.ar/home.htm" title="Gobierno de Argentina">
		<img height="100pt" width="200pt" src="VALIDe_files/logoGobEsp.PNG" alt="www.gob.ar" title="Gobierno de Argentina" class="logoGobEsp">
	</a>
	<!-- MENÚ CABECERA ** -->
	<div class="menuSuperior">
		<div id="menu_cabecera">
			<ul>
				<!-- <li><a href="#" title="Mapa Web">Mapa Web</a> | </li> -->
				<li>
					<a href="https://contactar.html" title="Contactar">
						Contactar
					</a>
			</li></ul>		
		</div>
		
		<!-- IDIOMA ** -->
		<div id="idiomas">
		  <ul>
			<li><a href="https://valide/valide/firmar/ejecutar.html?lang=es" title="Selecciona idioma">Bienvenido</a> | </li>
			<li><a href="https://valide/valide/firmar/ejecutar.html?lang=en" title="Selecciona idioma">Welcome</a>  </li>
		  </ul>		
		</div>
	</div>
</div>
<div class="clear"></div>
		</div>
		<div id="contenidoTop"></div>
		<div id="contenido">
			<div id="cuerpo">
				<div class="bloqueIzquierdoInterior">
					


                         
	<div class="menuVertical">
		<ul>
			<li>
				<a href="https://valide.redsara.es/valide/validarCertificado/ejecutar.html" title="Validar Certificado">Validar Certificado</a>
				<span class="separadorMenu"></span>
			</li>
			<li>
				<a href="https://valide.redsara.es/valide/firmar/ejecutar.html" title="Realizar firma">Realizar firma</a>
				<span class="separadorMenu"></span>	
			</li>
			<li>
				<a href="https://valide.redsara.es/valide/validarFirma/ejecutar.html" title="Validar Firma">Validar Firma</a>
				<span class="separadorMenu"></span>	
			</li>
			<li>
				<a href="https://valide.redsara.es/valide/validarSede/ejecutar.html" title="Validar Sede Electrónica">Validar Sede Electrónica</a>
				<span class="separadorMenu"></span>	
			</li>
			<li>
				<a href="https://valide.redsara.es/valide/visor/ejecutar.html" title="Visualizar Firma">Visualizar Firma</a>
				<span class="separadorMenu"></span>	
			</li>
			<li>
				<a href="https://valide.redsara.es/valide/faqs.html" title="Faqs">Faqs</a>
				<span class="separadorMenu"></span>	
			</li>
		
		</ul>                                
	</div>   







				</div>
				<div class="bloqueDerechoInterior">
					



<div id="cargandoApplet" class="error cursiva" style="display: none;">
	<br>
	Cargando el applet para la creación de la firma. Tenga paciencia
	<br><br>
	<span>ESPERE POR FAVOR...</span>
</div>
<div id="pantalla" style="display: block;">
<form id="sede" action="/valide/ejecutarFirmar/ejecutar.html" method="post">
	<h2>
		<img src="VALIDe_files/icon_realizarFirma.png" alt="validar sede" class="VASub VANormalIE7">
		<span>Realizar Firma Electrónica</span>
	</h2>
	<p>Una firma digital es un conjunto de datos asociados a un mensaje que
 permite asegurar la identidad del firmante y la integridad del mensaje.</p>
	<div class="separadorSeccion"></div>
	<fieldset>
	<p id="firmaProceso1">Para realizar una firma pulsa el botón "Firmar" y selecciona el documento. A continuación guarda la firma.</p>
	<p id="firmaProcesoAND" style="display:none; font-size:19px; color:#AE083B;padding:15px 3px 3px 15px; font-weight:normal"><br>Existe una versión del cliente que le permite generar firmas electrónicas en su dispositivo.<br><br>Para ello, descargue la app o aplicación <a href="https://play.google.com/store/apps/details?id=es.gob.afirma">Cliente móvil @firma</a> y verifique el funcionamiento en el siguiente enlace<br><br></p><center><a id="firmaMovil" href="https://valide.redsara.es/firmaMovil" style="display:none; font-size:18px; padding:15px 3px 3px 15px; font-weight:normal">Realizar Firma Electrónica (Firm@Movil)</a></center><p></p><p></p>
	<p id="firmaProcesoIOS" style="display:none; font-size:19px; color:#AE083B;padding:15px 3px 3px 15px; font-weight:normal"><br>Existe una versión del cliente que le permite generar firmas electrónicas en su dispositivo.<br><br>Para ello, descargue la app o aplicación <a href="https://itunes.apple.com/es/app/cliente-firma-movil/id627410001">Cliente móvil @firma</a> y verifique el funcionamiento en el siguiente enlace<br><br></p><center><a id="firmaMovil" href="https://valide.redsara.es/firmaMovil" style="display:none; font-size:18px; padding:15px 3px 3px 15px; font-weight:normal">Realizar Firma Electrónica (Firm@Movil)</a></center><p></p><p></p>
	<br>
	<div id="botones" class="botoneraCentro">
		<input class="botonP marginR15" id="botonFirmar" value="Firmar" onclick="javascript:firmar();" type="button">
		<input class="botonM marginR15" id="saveFile" value="Guardar Firma" onclick="javascript:guardarFirma();" disabled="disabled" type="button"><br>
	</div>
	<div id="divmensaje">&nbsp;</div>
	<br>
	<div id="clienteEscritorio">
		<div class="barraSeparadora"></div>
        <h3 class="marginB10"><img src="VALIDe_files/w_flecha.png" style="vertical-align:middle" width="30">&nbsp;
            <a href="Descargas.html" class="enlace2" target="_blank">
                Descárgate el cliente de firma (versión Escritorio)
            </a>
        </h3>
		<p>El cliente de firma (versión Escritorio) es una aplicación de firma
 que instalas en tu ordenador y que te permite elegir el tipo de firma 
que quieres realizar para firmar directamente desde tu ordenador sin 
necesidad de estar conectado a internet.<br></p>
	</div>
	</fieldset>
</form>

	<div class="nota" id="nota">
		<p>Nota: La firma digital se realiza mediante una aplicacion java web start descargado
 en su navegador. Dicha aplicacion ha sido firmada por xxx. para Impulso 
de la Administración Digital por su seguridad.<a href="https://requisitos.html" class="enlace">Pulsa aquí para ver los requisitos de funcionamiento</a></p>
	</div>
	<div class="nota" id="nota2" style="display:none">
		<p>Nota: La firma digital se realiza mediante una aplicación 
firmada por xxx. para Impulso de la Administración Digital por su
 seguridad.<a href="https://valide.redsara.es/valide/requisitos.html?mobile=true" class="enlace">Pulsa aquí para ver los requisitos de funcionamiento</a></p>
	</div>

</div>
				</div>
				 <div class="clear"></div>
			</div><!-- FIN DE CUERPO -->
		</div><!-- FIN DE CONTENIDO -->
		<div id="contenidoBottom"></div>
		<div id="pie">
			
<!-- LOGOS PIE ** -->
<span style="float:left; margin:13px 0 0 33px">
    <img src="VALIDe_files/logo_eu.jpg" alt="FEDER" width="30">
</span>	
<div id="logos" style="width:280px; margin-top:15px">
	<img src="VALIDe_files/btn_w3c_aa.gif" class="logo_w3c" alt="W3C AA">
	<img src="VALIDe_files/btn_w3c_css.gif" class="logo_w3c" alt="W3C CSS">
	<img src="VALIDe_files/btn_w3c_xhtml.gif" class="logo_w3c" alt="W3C HTML">
</div>
<!-- FIN DE LOGOS PIE ** -->
<!-- MENÚ PIE ** -->
<div id="menu_pie" style="margin-top:30px">
	<ul>
		<li><a href="accesibilidad.html" title="Accesibilidad">Accesibilidad</a> | </li>
		<li><a href="guiaNavegacion.html" title="Mapa Web">Mapa Web</a> | </li>
		<li><a href="requisitos.html" title="Requisitos">Requisitos</a> | </li>
		<li><a href="condiciones.html" title="Condiciones de Uso">Condiciones de Uso</a> </li>
	</ul>		
</div><!-- FIN DE MENÚ PIE ** -->

		</div>
	</div> <!-- FIN DE CONTENEDOR -->
	
<script type="text/javascript" defer="defer">
<!--
	
	var signature;
	var mobile = false;
	var filename;
	var divMensaje = document.getElementById('divmensaje');
	var btn_firmar = document.getElementById('botonFirmar');
	var btn_save = document.getElementById('saveFile');
	var saveExtension = "*.csig";
	var saveDescription = "Firma avanzada CAdES (*.csig)";
	
	var autofirma = false;
	
	if ((MiniApplet.isAndroid()==true) || (MiniApplet.isIOS()==true)) {
		mobile = true;
	}

	function isLoad() {

		var tempCliente = document.getElementById("miniApplet");
		var appletLoaded;
		try {
			appletLoaded = tempCliente != null && tempCliente.echo() != "Cliente 
JavaScript"; 
		}
		catch (e) {
			appletLoaded = false;
		}
		if (appletLoaded) {
			return true;
		}
		else {
			return false;
		}
		
	}
	
	function firmar() {

		if (isLoad()==false) {
			autofirma = true;
		}
		else {
			autofirma = false;
		}
	
		btn_firmar.disabled = true;
		btn_save.disabled = true;
		
		divMensaje.innerHTML='&nbsp;';

		var dataB64 = null;
		var format = "AUTO";
		var params;
		try {
		
			if (mobile==false) {
			
				params = "mode=implicit";
				
				if (autofirma==true) {
					dataB64 = null;
				}
				else {
					var fichero = MiniApplet.getFileNameContentBase64("Selecciona un 
archivo ", "", "");
					
					var separatorIdx = fichero.indexOf("|");
					if ((separatorIdx + 1) < fichero.length) {
						filename = fichero.substring(0, separatorIdx);
						dataB64 = fichero.substring(separatorIdx + 1);
						
						var extension = getExtension(filename) + "";
						extension = extension.toUpperCase();
						
						if (extension == "PDF") {
							saveExtension = "*.pdf";
							saveDescription = "Adobe PDF (*.pdf)";
						}
						else if (extension == "XML" || extension == "XSIG") {
							saveExtension = "*.xsig";
							saveDescription = "Firma XML (*.xsig, *.xml)";
						}
					}
				}
				
				MiniApplet.sign(dataB64, "SHA256withRSA", format, params, 
successCallback, errorCallback);
				
			}
			
		}
		catch (e) {
			//Se muestra el mensaje de error si NO es de cancelación de la 
operación
			if ((e.message.indexOf("PrivilegedActionException")==-1) && 
			    (e.message.indexOf("AOCancelledOperationException")==-1) && 
			    (e.message.indexOf("Error calling method on NPObject")==-1) && 
				(e.message.indexOf("Operacion cancelada por el usuario")==-1)) {
				divMensaje.innerHTML='<div class="iconErrorFirma">Error al 
firmar</div><br><div style="width:300pt">&nbsp;' + e.message + '</div>';
			}
			btn_firmar.disabled = false;
		}
		
	}
	
	function guardarFirma(){		
	
		if (mobile==false) {
			if (autofirma==true) {
				MiniApplet.saveDataToFile(signature, "Guardar firma", null, null, 
null, successSaveCallback, errorSaveCallback);
			}
			else {
				var saveFile = MiniApplet.saveDataToFile(signature, "Guardar firma",
 null, null, saveDescription);
				if (saveFile==true) {
					divMensaje.innerHTML='<div class="iconOKFirma">Fichero firmado y 
almacenado correctamente</div><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp;' + filename;
				}
			}
		}
	}
	
	function getExtension(filename){
		return (/[.]/.exec(filename)) ? /[^.]+$/.exec(filename) : undefined;
	}
	
	function mostrarPantalla()	{
	
		if (isLoad()==false) {
			autofirma = true;
		}
	
		document.getElementById("cargandoApplet").style.display = "none";
		document.getElementById("pantalla").style.display = "block";
		if (mobile==true) {
			document.getElementById("firmaProceso1").style.display = "none";
			document.getElementById("botones").style.display = "none";
			document.getElementById("divmensaje").style.display = "none";
			
			if (MiniApplet.isAndroid()) {
				document.getElementById("firmaProcesoAND").style.display = "inline";
			}
			else if (MiniApplet.isIOS()) {
				document.getElementById("firmaProcesoIOS").style.display = "inline";
			}
			document.getElementById("firmaMovil").style.display = "inline";
			document.getElementById("saveFile").style.display = "none";
			document.getElementById("clienteEscritorio").style.display = "none";
			document.getElementById("nota").style.display = "none";
			document.getElementById("nota2").style.display = "inline";
		}
	}

	function successCallback(signatureB64, certificateB64) {
	
		signature = signatureB64;
		
		if (autofirma==false) {
			divMensaje.innerHTML='<div class="iconOKFirma">Fichero firmado 
correctamente</div><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;'
 + filename;
		}
		else {
			divMensaje.innerHTML='<br><div class="iconOKFirma">Fichero firmado 
correctamente</div><br>&nbsp;';
		}
		btn_firmar.disabled = false;
		btn_save.disabled = false;
		
	}
	
	function errorCallback(errorType, errorMessage) {
		if ((errorMessage) && 
(errorMessage.indexOf("AOCancelledOperationException")==-1) && 
(errorMessage.indexOf("Operacion cancelada por el usuario")==-1)) {
			if (errorMessage.indexOf("El almacen no contenia entradas")!=-1) {
				divMensaje.innerHTML='<img class="iconStatus" 
src="/valide/img/iconFALLO.png">No existen certificados en el almacén de
 su navegador<br><br>';
			}
			else {
				divMensaje.innerHTML='<div class="iconErrorFirma">Error al 
firmar</div><br><div style="width:300pt">' + errorMessage + '</div>';
			}
		}
		btn_firmar.disabled = false;
	}

	function successSaveCallback() {
		divMensaje.innerHTML='<div class="iconOKFirma">Fichero firmado y 
almacenado correctamente</div><br>&nbsp;';
	}

	function errorSaveCallback(errorType, errorMessage) {
		divMensaje.innerHTML='<div class="iconErrorFirma">Error al 
firmar</div><br><div style="width:300pt">' + errorMessage + '</div>';
		btn_firmar.disabled = false;
	}
	
	function waiting(comando, segundos) {
			var waiting;
			var intento;

			if (waiting) {
					return true;
			}
			else {
					if (segundos==0) {
						eval(comando);
					}
					else {
						segundos = segundos - 1;
					}

					var func = function() 
					{ 
						this.waiting(comando, segundos);
					}
					setTimeout(func, 1000);
			}
	}	

-->  
</script>
<script type="text/javascript">

	//MiniApplet.cargarMiniApplet("https://valide.redsara.es/valide/applet");
	
//MiniApplet.setServlets("https://valide.redsara.es/firmaMovil/afirma-signature-storage/StorageService",
 
"https://valide.redsara.es/firmaMovil/afirma-signature-retriever/RetrieveService");

	
	if (navigator.userAgent.toUpperCase().indexOf("FIREFOX")!=-1) {
		if (navigator.javaEnabled()==false) {
			autofirma = true;
			mostrarPantalla();
		}
		else {
			waiting("mostrarPantalla()", 10);
		}
	}
	else {
		if ((navigator.javaEnabled()==false) || (isLoad()==false)) {
			autofirma = true;
		}
		mostrarPantalla();
	}
	
</script>
<!--<embed id="miniApplet" name="MiniApplet @firma (Gobierno de España)" type="application/x-java-applet" keystore="null" useragent="Mozilla/5.0 (Windows NT 5.1; rv:52.0) Gecko/20100101 Firefox/52.0" archive="https://valide.redsara.es/valide/applet/miniapplet-full_1_4.jar" code="es.gob.afirma.miniapplet.MiniAfirmaApplet" java-vm-args="-Xms512M -Xmx512M " java_arguments="-Xms512M -Xmx512M " system_properties="null" codebase_lookup="false" separate_jvm="true" locale="null" height="1" width="1">
-->

</body></html>